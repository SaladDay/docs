# 野火专业版IM服务性能测试报告
***野火专业版IM服务拥有非常强大的性能表现，在即时通讯行业内的性能指标是遥遥领先的***，所有的测试方法和测试过程全都公开，专业版客户可以自己来测试性能表现。

测试分为长连接测试、单聊消息发送测试、群聊消息发送测试和聊天室发送消息测试。测试结果分别如下：

## 单机百万长连接测试
测试方法：单台IM服务，模拟一百万用户连接上并保持在线不掉线30分钟以上。

硬件需求：一台16核32G腾讯云标准S6云服务器，一台4C8G腾讯云MySQL服务器。

测试结果：成功保持30分钟以上，无掉线。保持期间IM服务CPU利用率十核左右，MySQL 利用率为0。

测试详情：https://gitee.com/wfchat/C1000K_Test

测试视频：https://www.bilibili.com/video/BV1TZ4y1e7Ct

## 单聊消息测试
单聊消息测试分2部分：第一个测试是发送测试，只发送消息，接收对象离线；第二个测试是收发测试，发送消息同时，接收对象在线实时接收消息。

### 发送消息测试
测试方法：200个发送用户，1000个接收用户，其中999个接收用户离线，有1个接收用户为真实手机客户端在线，实时接收消息。测试一次发送50轮，发送消息总量为一千万条。

硬件需求：一台8核32G腾讯云标准S6云服务器，一台8C16G腾讯云MySQL服务器。合计16核48G服务器资源。

测试结果：

| 内容 | 结果 | 说明 |
| ------ | ------ | ------ |
| 服务资源 | 16核48G| 云服务器和云MySQL硬件资源合计计算  |
| 发送条数 | 1000万 | 200个发送者，1000个接收者，发送50轮 |
| 成功率 | 100% | 所有消息都成功落库，观察者接收消息条数正确 |
| 发送延迟 | 肉眼无法察觉 | 发送结束后，观察者立即收齐消息。服务器压力迅速降为0 |
| 发送时间 | 509秒 |  |
| 发送速率 | 19646条/秒 |  |
| 发送单核速率 | 1227条/秒 | 发送测试速率除以核心数16 |
| 发送单核分发速率 | 2455条/秒 | 单聊测试的分发是2，所以是单核测试速度乘于2 |

### 收发消息测试
测试方法：200个发送用户，1000个接收用户，接收用户全部在线实时接收消息，其中有1个接收用户为真实手机客户端，实时接收消息。测试一次发送50轮，发送消息总量为一千万条。

硬件需求：一台8核32G腾讯云标准S6云服务器，一台8C16G腾讯云MySQL服务器。合计16核48G服务器资源。

测试结果：

| 内容 | 结果 | 说明 |
| ------ | ------ | ------ |
| 服务资源 | 16核48G| 云服务器和云MySQL硬件资源合计计算  |
| 收发条数 | 1000万 | 200个发送者，1000个接收者，发送50轮。1000个接受者在线实时接收消息 |
| 成功率 | 100% | 所有消息都成功落库，观察者接收消息条数正确 |
| 收发延迟 | 肉眼无法察觉 | 发送结束后，观察者立即收齐消息。服务器压力迅速降为0 |
| 收发时间 | 719秒 |  |
| 收发速率 | 13908条/秒 |  |
| 收发单核速率 | 869条/秒 | 发送测试速率除以核心数16 |

## 测试说明和测试视频
发送消息测试和收发消息测试，可以在下面测试详情找到说明，可以在测试视频中观看我们测试过程。可以根据测试详情和视频来自己验证野火专业版IM服务的性能。

测试详情：https://gitee.com/wfchat/Performance_Test/tree/main/single_message_test

测试视频：https://www.bilibili.com/video/bv1EY4y1n7iS

## 群聊消息测试
暂未进行，稍后提供。

## 聊天室消息测试
暂未进行，稍后提供。
